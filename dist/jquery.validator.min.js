/*! nice-validator 1.0.0-alpha
 * (c) 2012-2016 Jony Zhang <niceue@live.com>, MIT Licensed
 * https://github.com/niceue/nice-validator
 */
!function(e){"object"==typeof module&&module.exports?module.exports=e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e,t){"use strict";function i(t,n){function s(){a._init(a.$el[0],n)}var a=this;return a instanceof i?(a.$el=e(t),void(a.$el.length?i.loading?e(window).on("validatorready",s):s():J(t)&&(G[t]=n))):new i(t,n)}function n(t){function i(){var t=this.options;for(var i in t)i in Y&&(this[i]=t[i]);e.extend(this,{_valHook:function(){return null!==this.element.getAttribute("contenteditable")?"text":"val"},getValue:function(){var t=this.element;return"number"===t.type&&t.validity&&t.validity.badInput?"NaN":e(t)[this._valHook()]()},setValue:function(t){e(this.element)[this._valHook()](this.value=t)},getRangeMsg:function(e,t,i){function n(e,t){return o?e>t:e>=t}if(t){var s,a=this,l=a.messages[a._r]||"",r=t[0].split("~"),o="false"===t[1],u=r[0],d=r[1],c="rg",f=[""],g=U(e)&&+e===+e;return 2===r.length?u&&d?(g&&n(e,+u)&&n(+d,e)&&(s=!0),f=f.concat(r),c=o?"gtlt":"rg"):u&&!d?(g&&n(e,+u)&&(s=!0),f.push(u),c=o?"gt":"gte"):!u&&d&&(g&&n(+d,e)&&(s=!0),f.push(d),c=o?"lt":"lte"):(e===+u&&(s=!0),f.push(u),c="eq"),l&&(i&&l[c+i]&&(c+=i),f[0]=l[c]),s||a._rules&&(a._rules[a._i].msg=a.renderMsg.apply(null,f))}},renderMsg:function(){var e=arguments,t=e[0],i=e.length;if(t){for(;--i;)t=t.replace("{"+i+"}",e[i]);return t}}})}function n(i,n,s){this.key=i,this.validator=t,e.extend(this,s,n)}return i.prototype=t,n.prototype=new i,n}function s(e,t){if(Q(e)){var i,n=t?t===!0?this:t:s.prototype;for(i in e)g(i)&&(n[i]=l(e[i]))}}function a(e,t){if(Q(e)){var i,n=t?t===!0?this:t:a.prototype;for(i in e)n[i]=e[i]}}function l(t){switch(e.type(t)){case"function":return t;case"array":var i=function(){return t[0].test(this.value)||t[1]||!1};return i.msg=t[1],i;case"regexp":return function(){return t.test(this.value)}}}function r(t){var i,n,s;if(t&&t.tagName){switch(t.tagName){case"INPUT":case"SELECT":case"TEXTAREA":case"BUTTON":case"FIELDSET":i=t.form||e(t).closest("."+k);break;case"FORM":i=t;break;default:i=e(t).closest("."+k)}for(n in G)if(e(i).is(n)){s=G[n];break}return e(i).data(p)||e(i)[p](s).data(p)}}function o(e,t){var i=U(z(e,V+"-"+t));return i&&(i=new Function("return "+i)())?l(i):void 0}function u(e,t,i){var n=t.msg,s=t._r;return Q(n)&&(n=n[s]),J(n)||(n=z(e,$+"-"+s)||z(e,$)||(i?J(i)?i:i[s]:"")),n}function d(e){var t;return e&&(t=I.exec(e)),t&&t[0]}function c(e){return"INPUT"===e.tagName&&"checkbox"===e.type||"radio"===e.type}function f(e){return Date.parse(e.replace(/\.|\-/g,"/"))}function g(e){return/^\w+$/.test(e)}function m(e){var t="#"===e.charAt(0);return e=e.replace(/([:.{(|)}\/\[\]])/g,"\\$1"),t?e:'[name="'+e+'"]:first'}var h,p="validator",v="."+p,_=".rule",y=".field",b=".form",k="nice-"+p,w="msg-box",x="aria-required",M="aria-invalid",V="data-rule",$="data-msg",F="data-tip",O="data-ok",C="data-timely",E="data-target",j="data-display",A="data-must",T="novalidate",S=":verifiable",N=/(&)?(!)?\b(\w+)(?:\[\s*(.*?\]?)\s*\]|\(\s*(.*?\)?)\s*\))?\s*(;|\|)?/g,q=/(\w+)(?:\[\s*(.*?\]?)\s*\]|\(\s*(.*?\)?)\s*\))?/,R=/(?:([^:;\(\[]*):)?(.*)/,D=/[^\x00-\xff]/g,I=/top|right|bottom|left/,H=/(?:(cors|jsonp):)?(?:(post|get):)?(.+)/i,B=/[<>'"`\\]|&#x?\d+[A-F]?;?|%3[A-F]/gim,L=e.noop,P=e.proxy,U=e.trim,W=e.isFunction,J=function(e){return"string"==typeof e},Q=function(e){return e&&"[object Object]"===Object.prototype.toString.call(e)},X=document.documentMode||+(navigator.userAgent.match(/MSIE (\d+)/)&&RegExp.$1),z=function(e,i,n){return e&&e.tagName?n===t?e.getAttribute(i):void(null===n?e.removeAttribute(i):e.setAttribute(i,""+n)):null},G={},K={debug:0,theme:"default",ignore:"",focusInvalid:!0,focusCleanup:!1,stopOnError:!1,beforeSubmit:null,valid:null,invalid:null,validation:null,validClass:"n-valid",invalidClass:"n-invalid",bindClassTo:null},Y={timely:1,display:null,target:null,ignoreBlank:!1,showOk:!0,dataFilter:function(e){return J(e)||Q(e)&&("error"in e||"ok"in e)?e:void 0},msgMaker:function(t){var i;return i='<span role="alert" class="msg-wrap n-'+t.type+'">'+t.arrow,t.result?e.each(t.result,function(e,n){i+='<span class="n-'+n.type+'">'+t.icon+'<span class="n-msg">'+n.msg+"</span></span>"}):i+=t.icon+'<span class="n-msg">'+t.msg+"</span>",i+="</span>"},msgWrapper:"span",msgArrow:"",msgIcon:'<span class="n-icon"></span>',msgClass:"",msgStyle:"",msgShow:null,msgHide:null},Z={"default":{formClass:"n-default",msgClass:"n-right"}};return e.fn[p]=function(t){var n=this,s=arguments;return n.is(S)?n:(n.is("form")||(n=this.find("form")),n.length||(n=this),n.each(function(){var n=e(this).data(p);if(n)if(J(t)){if("_"===t.charAt(0))return;n[t].apply(n,[].slice.call(s,1))}else t&&(n._reset(!0),n._init(this,t));else new i(this,t)}),this)},e.fn.isValid=function(e,t){var i,n,s=r(this[0]),a=W(e);return s?(s.checkOnly=!!t,n=s.options,i=s._multiValidate(this.is(S)?this:this.find(S),function(t){t||!n.focusInvalid||s.checkOnly||s.$el.find("["+M+"]:first").focus(),a&&(e.length?e(t):t&&e()),s.checkOnly=!1}),a?this:i):!0},e.expr[":"].verifiable=function(e){var t=e.nodeName.toLowerCase();return("input"===t&&!{submit:1,button:1,reset:1,image:1}[e.type]||"select"===t||"textarea"===t)&&e.disabled===!1||null!==e.getAttribute("contenteditable")},e.expr[":"].filled=function(t){return!!U(e(t).val())},i.prototype={_init:function(t,i){var l,r,o,u=this;W(i)&&(i={valid:i}),i=i||{},o=z(t,"data-"+p+"-option"),o=o&&"{"===o.charAt(0)?new Function("return "+o)():{},r=Z[i.theme||o.theme||K.theme],l=u.options=e.extend({},K,Y,r,u.options,i,o),u.rules=new s(l.rules,!0),u.messages=new a(l.messages,!0),u.Field=n(u),u.elements=u.elements||{},u.deferred={},u.errors={},u.fields={},u._initFields(l.fields),J(l.target)&&u.$el.find(l.target).addClass("msg-container"),u.$el.data(p)||(u.$el.data(p,u).addClass(k+" "+l.formClass).on("form-submit-validate",function(e,t,i,n,s){u.vetoed=s.veto=!u.isValid,u.ajaxFormOptions=n}).on("submit"+v+" validate"+v,P(u,"_submit")).on("reset"+v,P(u,"_reset")).on("showmsg"+v,P(u,"_showmsg")).on("hidemsg"+v,P(u,"_hidemsg")).on("focusin"+v+" click"+v,S,P(u,"_focusin")).on("focusout"+v+" validate"+v,S,P(u,"_focusout")),l.timely&&u.$el.on("keyup"+v+" input"+v+" compositionstart compositionend",S,P(u,"_focusout")).on("click"+v,":radio,:checkbox","click",P(u,"_focusout")).on("change"+v,'select,input[type="file"]',"change",P(u,"_focusout")),u._novalidate=z(t,T),z(t,T,T))},_guessAjax:function(t){function i(t,i,n){return!!(t&&t[i]&&e.map(t[i],function(e){return~e.namespace.indexOf(n)?1:null}).length)}var n=this;if(!(n.isAjaxSubmit=!!n.options.valid)){var s=(e._data||e.data)(t,"events");n.isAjaxSubmit=i(s,"valid","form")||i(s,"submit","form-plugin")}},_initFields:function(e){function t(e,t){if(null===t||l){var i=a.elements[e];i&&a._resetElement(i,!0),delete a.fields[e]}else a.fields[e]=new a.Field(e,J(t)?{rule:t}:t,a.fields[e])}var i,n,s,a=this,l=null===e;if(l&&(e=a.fields),Q(e))for(i in e)if(~i.indexOf(","))for(n=i.split(","),s=n.length;s--;)t(U(n[s]),e[i]);else t(i,e[i]);a.$el.find(S).each(function(){a._parse(this)})},_parse:function(e){var t,i,n,s=this,a=e.name,l=z(e,V);return l&&z(e,V,null),e.id&&("#"+e.id in s.fields||!a||null!==l&&(t=s.fields[a])&&l!==t.rule&&e.id!==t.key)&&(a="#"+e.id),a?(t=s.getField(a,!0),t.rule=l||t.rule,(i=z(e,j))&&(t.display=i),t.rule&&((null!==z(e,A)||/\b(?:match|checked)\b/.test(t.rule))&&(t.must=!0),/\brequired\b/.test(t.rule)&&(t.required=!0,z(e,x,!0)),(n=z(e,C))?t.timely=+n:t.timely>3&&z(e,C,t.timely),s._parseRule(t),t.old={}),J(t.target)&&z(e,E,t.target),J(t.tip)&&z(e,F,t.tip),s.fields[a]=t):void 0},_parseRule:function(i){var n=R.exec(i.rule);n&&(i._i=0,n[1]&&(i.display=n[1]),n[2]&&(i._rules=[],n[2].replace(N,function(){var n=arguments;n[4]=n[4]||n[5],i._rules.push({and:"&"===n[1],not:"!"===n[2],or:"|"===n[6],method:n[3],params:n[4]?e.map(n[4].split(", "),U):t})})))},_multiValidate:function(i,n){var s,a=this,l=a.options;return l.ignore&&(i=i.not(l.ignore)),i.each(function(){return a._validate(this),a.hasError&&l.stopOnError?!1:void 0}),s=!a.hasError,n&&(a.validating=!0,e.when.apply(null,e.map(a.deferred,function(e){return e})).done(function(){n.call(a,s),a.validating=!1})),delete a.hasError,e.isEmptyObject(a.deferred)?s:t},_submit:function(i){var n=this,s=n.options,a=i.target,l="submit"===i.type&&!i.isDefaultPrevented();i.preventDefault(),h&&~(h=!1)||n.submiting||"validate"===i.type&&n.$el[0]!==a||W(s.beforeSubmit)&&s.beforeSubmit.call(n,a)===!1||(n.isAjaxSubmit===t&&n._guessAjax(a),n._debug("log","\n<<< event: "+i.type),n._reset(),n.submiting=!0,n._multiValidate(n.$el.find(S),function(t){var i,r=t||2===s.debug?"valid":"invalid";t||(s.focusInvalid&&n.$el.find("["+M+"]:first").focus(),i=e.map(n.errors,function(e){return e})),n.submiting=!1,n.isValid=t,W(s[r])&&s[r].call(n,a,i),n.$el.trigger(r+b,[a,i]),n._debug("log",">>> "+r),t&&(n.vetoed?e(a).ajaxSubmit(n.ajaxFormOptions):l&&!n.isAjaxSubmit&&document.createElement("form").submit.call(a))}))},_reset:function(e){var t=this;t.errors={},e&&(t.reseting=!0,t.$el.find(S).each(function(){t._resetElement(this)}),delete t.reseting)},_resetElement:function(e,t){this._setClass(e,null),this.hideMsg(e),t&&z(e,x,null)},_focusin:function(e){var t,i,n=this,s=n.options,a=e.target;n.validating||"click"===e.type&&document.activeElement===a||(s.focusCleanup&&"true"===z(a,M)&&(n._setClass(a,null),n.hideMsg(a)),i=z(a,F),i?n.showMsg(a,{type:"tip",msg:i}):(z(a,V)&&n._parse(a),(t=z(a,C))&&(8!==t&&9!==t||n._focusout(e))))},_focusout:function(t){var i,n,s,a,l,r,o,u,d,f=this,g=f.options,m=t.target,h=t.type,p="focusin"===h,v="validate"===h,_=0;if("compositionstart"===h&&(f.pauseValidate=!0),"compositionend"===h&&(f.pauseValidate=!1),!f.pauseValidate&&(n=m.name&&c(m)?f.$el.find('input[name="'+m.name+'"]').get(0):m,s=f.getField(n))){if(i=s._e,s._e=h,d=s.timely,!v){if(!d||c(m)&&"click"!==h)return;if(l=s.getValue(),s.ignoreBlank&&!l&&!p)return void f.hideMsg(m);if("focusout"===h){if("change"===i)return;if(2===d||8===d){if(!l)return;a=s.old,s.isValid&&!a.showOk?f.hideMsg(m):f._makeMsg(m,s,a)}}else{if(2>d&&!t.data)return;if(r=+new Date,r-(m._ts||0)<100)return;if(m._ts=r,"keyup"===h){if("input"===i)return;if(o=t.keyCode,u={8:1,9:1,16:1,32:1,46:1},9===o&&!l)return;if(48>o&&!u[o])return}p||(_=100>d?"click"===h||"SELECT"===m.tagName?0:400:d)}}g.ignore&&e(m).is(g.ignore)||(clearTimeout(s._t),_?s._t=setTimeout(function(){f._validate(m,s)},_):(v&&(s.old={}),f._validate(m,s)))}},_setClass:function(t,i){var n=e(t),s=this.options;s.bindClassTo&&(n=n.closest(s.bindClassTo)),n.removeClass(s.invalidClass+" "+s.validClass),null!==i&&n.addClass(i?s.validClass:s.invalidClass)},_showmsg:function(t,i,n){var s=this,a=t.target;e(a).is(S)?s.showMsg(a,{type:i,msg:n}):"tip"===i&&s.$el.find(S+"["+F+"]",a).each(function(){s.showMsg(this,{type:i,msg:n})})},_hidemsg:function(t){var i=e(t.target);i.is(S)&&this.hideMsg(i)},_validatedField:function(t,i,n){var s=this,a=s.options,l=i.isValid=n.isValid=!!n.isValid,r=l?"valid":"invalid";n.key=i.key,n.ruleName=i._r,n.id=t.id,n.value=i.value,l?n.type="ok":(s.submiting&&(s.errors[i.key]=n.msg),s.isValid=!1,s.hasError=!0),s.elements[i.key]=n.element=t,s.$el[0].isValid=l?s.isFormValid():l,i.old=n,W(i[r])&&i[r].call(s,t,n),W(a.validation)&&a.validation.call(s,t,n),e(t).attr(M,l?null:!0).trigger(r+y,[n,s]),s.$el.triggerHandler("validation",[n,s]),s.checkOnly||(s._setClass(t,n.skip||"tip"===n.type?null:l),s._makeMsg.apply(s,arguments))},_makeMsg:function(t,i,n){i.msgMaker&&(n=e.extend({},n),"focusin"===i._e&&(n.type="tip"),this[n.showOk||n.msg||"tip"===n.type?"showMsg":"hideMsg"](t,n,i))},_validatedRule:function(i,n,s,a){n=n||c.getField(i),a=a||{};var l,r,o,d,c=this,f=n._r,g=n.timely,m=9===g||8===g,h=!1;if(null===s)return c._validatedField(i,n,{isValid:!0,skip:!0}),void(n._i=0);if(s===t?o=!0:s===!0||""===s?h=!0:J(s)?l=s:Q(s)&&(s.error?l=s.error:(l=s.ok,h=!0)),r=n._rules[n._i],r.not&&(l=t,h="required"===f||!h),r.or)if(h)for(;n._i<n._rules.length&&n._rules[n._i].or;)n._i++;else o=!0;else r.and&&(n.isValid||(o=!0));o?h=!0:(h&&n.showOk!==!1&&(d=z(i,O),l=null===d?J(n.ok)?n.ok:l:d,!J(l)&&J(n.showOk)&&(l=n.showOk),J(l)&&(a.showOk=h)),h&&!m||(l=(u(i,n,l||r.msg||c.messages[f])||c.messages.fallback).replace(/\{0\|?([^\}]*)\}/,function(e,t){return c._getDisplay(i,n.display)||t||c.messages[0]})),h||(n.isValid=h),a.msg=l,e(i).trigger((h?"valid":"invalid")+_,[f,l])),!m||o&&!r.and||(h||n._m||(n._m=l),n._v=n._v||[],n._v.push({type:h?o?"tip":"ok":"error",msg:l||r.msg})),c._debug("log","   "+n._i+": "+f+" => "+(h||l)),(h||m)&&n._i<n._rules.length-1?(n._i++,c._checkRule(i,n)):(n._i=0,m?(a.isValid=n.isValid,a.result=n._v,a.msg=n._m||"",n.value||"focusin"!==n._e||(a.type="tip")):a.isValid=h,c._validatedField(i,n,a),delete n._m,delete n._v)},_checkRule:function(i,n){var s,a,l,r=this,u=n.key,d=n._rules[n._i],c=d.method,f=d.params;r.submiting&&r.deferred[u]||(l=n.old,n._r=c,l&&!n.must&&!d.must&&d.result!==t&&l.ruleName===c&&l.id===i.id&&n.value&&l.value===n.value?s=d.result:(a=o(i,c)||r.rules[c]||L,s=a.call(n,i,f,n),a.msg&&(d.msg=a.msg)),Q(s)&&W(s.then)?(r.deferred[u]=s,n.isValid=t,!r.checkOnly&&r.showMsg(i,{type:"loading",msg:r.messages.loading},n),s.then(function(s,a,l){var o,u=l.responseText,c=n.dataFilter;/jsonp?/.test(this.dataType)?u=s:"{"===U(u).charAt(0)&&(u=e.parseJSON(u)),o=c.call(this,u,n),o===t&&(o=c.call(this,u.data,n)),d.data=this.data,d.result=n.old?o:t,r._validatedRule(i,n,o)},function(e,t){r._validatedRule(i,n,r.messages[t]||t)}).always(function(){delete r.deferred[u]})):r._validatedRule(i,n,s))},_validate:function(e,t){var i=this;if(!e.disabled&&null===z(e,T)&&(t=t||i.getField(e),t&&(t._rules||i._parse(e),t._rules)))return i._debug("info",t.key),t.isValid=!0,t.element=e,t.value=t.getValue(),t.required||t.must||t.value||c(e)?(i._checkRule(e,t),t.isValid):(i._validatedField(e,t,{isValid:!0}),!0)},_debug:function(e,t){window.console&&this.options.debug&&console[e](t)},test:function(e,i){var n,s,a,l,r=this,o=q.exec(i);return o&&(a=o[1],a in r.rules&&(l=o[2]||o[3],l=l?l.split(", "):t,s=r.getField(e,!0),s._r=a,s.value=s.getValue(),n=r.rules[a].call(s,e,l))),n===!0||n===t||null===n},_getDisplay:function(e,t){return J(t)?t:W(t)?t.call(this,e):""},_getMsgOpt:function(t,i){var n=i?i:this.options;return e.extend({type:"error",pos:d(n.msgClass),wrapper:n.msgWrapper,style:n.msgStyle,cls:n.msgClass,arrow:n.msgArrow,icon:n.msgIcon},J(t)?{msg:t}:t)},_getMsgDOM:function(i,n){var s,a,l,r,o=e(i);if(o.is(S)?(l=n.target||z(i,E),l&&(l=W(l)?l.call(this,i):this.$el.find(l),l.length&&(l.is(S)?i=l.get(0):l.hasClass(w)?s=l:r=l)),s||(a=c(i)&&i.name||!i.id?i.name:i.id,s=this.$el.find(n.wrapper+"."+w+'[for="'+a+'"]'))):s=o,!n.hide&&!s.length)if(o=this.$el.find(l||i),s=e("<"+n.wrapper+">").attr({"class":w+(n.cls?" "+n.cls:""),style:n.style||t,"for":a}),c(i)){var u=o.parent();s.appendTo(u.is("label")?u.parent():u)}else r?s.appendTo(r):s[n.pos&&"right"!==n.pos?"insertBefore":"insertAfter"](o);return s},showMsg:function(t,i,n){if(t){var s,a,l,r,o=this,u=o.options;if(Q(t)&&!t.jquery&&!i)return void e.each(t,function(e,t){var i=o.elements[e]||o.$el.find(m(e))[0];o.showMsg(i,t)});e(t).is(S)&&(n=n||o.getField(t)),(a=(n||u).msgMaker)&&(i=o._getMsgOpt(i,n),t=e(t).get(0),i.msg||"error"===i.type||(l=z(t,"data-"+i.type),null!==l&&(i.msg=l)),J(i.msg)&&(r=o._getMsgDOM(t,i),!I.test(r[0].className)&&r.addClass(i.cls),6===X&&"bottom"===i.pos&&(r[0].style.marginTop=e(t).outerHeight()+"px"),r.html(a.call(o,i))[0].style.display="",W(s=n.msgShow||u.msgShow)&&s.call(o,r,i.type)))}},hideMsg:function(t,i,n){var s,a,l=this,r=l.options;t=e(t).get(0),e(t).is(S)&&(n=n||l.getField(t),n&&(n.isValid||l.reseting)&&z(t,M,null)),i=l._getMsgOpt(i,n),i.hide=!0,a=l._getMsgDOM(t,i),a.length&&(W(s=n&&n.msgHide||r.msgHide)?s.call(l,a,i.type):(a[0].style.display="none",a[0].innerHTML=null))},getField:function(e,i){var n,s,a=this;if(J(e))n=e,e=t;else{if(z(e,V))return a._parse(e);n=e.id&&"#"+e.id in a.fields||!e.name?"#"+e.id:e.name}return((s=a.fields[n])||i&&(s=new a.Field(n)))&&(s.element=e),s},setField:function(e,t){var i={};e&&(J(e)?i[e]=t:i=e,this._initFields(i))},isFormValid:function(){var e,t,i=this.fields;for(e in i)if(t=i[e],t._rules&&(t.required||t.must||t.value)&&!t.isValid)return!1;return!0},holdSubmit:function(e){this.submiting=e===t||e},cleanUp:function(){this._reset(1)},destroy:function(){this._reset(1),this.$el.off(v).removeData(p),z(this.$el[0],T,this._novalidate)}},e(window).on("beforeunload",function(){this.focus()}),e(document).on("click",":submit",function(){var e,t=this;t.form&&(e=t.getAttributeNode("formnovalidate"),(e&&null!==e.nodeValue||null!==z(t,T))&&(h=!0))}).on("focusin submit validate","form,."+k,function(t){if(null===z(this,T)){var i,n=e(this);!n.data(p)&&(i=r(this))&&(e.isEmptyObject(i.fields)?(z(this,T,T),n.off(v).removeData(p)):"focusin"===t.type?i._focusin(t):i._submit(t))}}),new a({fallback:"This field is not valid.",loading:"Validating..."}),new s({required:function(t,i){var n=this,s=U(n.value),a=!0;if(i)if(1===i.length){if(g(i[0])){if(n.rules[i[0]]){if(!s&&!n.test(t,i[0]))return z(t,x,null),null;z(t,x,!0)}}else if(!s&&!e(i[0],n.$el).length)return null}else if("not"===i[0])e.each(i.slice(1),function(){return a=s!==U(this)});else if("from"===i[0]){var l,r=n.$el.find(i[1]),o="_validated_";return a=r.filter(function(){var e=n.getField(this);return e&&!!U(e.getValue())}).length>=(i[2]||1),a?s||(l=null):l=u(r[0],n)||!1,e(t).data(o)||r.data(o,1).each(function(){t!==this&&n._validate(this)}).removeData(o),l}return a&&!!s},integer:function(e,t){var i,n="0|",s="[1-9]\\d*",a=t?t[0]:"*";switch(a){case"+":i=s;break;case"-":i="-"+s;break;case"+0":i=n+s;break;case"-0":i=n+"-"+s;break;default:i=n+"-?"+s}return i="^(?:"+i+")$",new RegExp(i).test(this.value)||this.messages.integer[a]},match:function(t,i){if(i){var n,s,a,l,r,o,u,d,c=this,g="eq";if(1===i.length?a=i[0]:(g=i[0],a=i[1]),o=m(a),u=c.$el.find(o)[0]){if(d=c.getField(u),n=c.value,s=d.getValue(),c._match||(c.$el.on("valid"+y+v,o,function(){e(t).trigger("validate")}),c._match=d._match=1),!c.required&&""===n&&""===s)return null;if(r=i[2],r&&(/^date(time)?$/i.test(r)?(n=f(n),s=f(s)):"time"===r&&(n=+n.replace(/:/g,""),s=+s.replace(/:/g,""))),"eq"!==g&&!isNaN(+n)&&isNaN(+s))return!0;switch(l=c.messages.match[g].replace("{1}",c._getDisplay(t,d.display||a)),g){case"lt":return+s>+n||l;case"lte":return+s>=+n||l;case"gte":return+n>=+s||l;case"gt":return+n>+s||l;case"neq":return n!==s||l;default:return n===s||l}}}},range:function(e,t){return this.getRangeMsg(this.value,t)},checked:function(e,t){if(c(e)){var i,n,s=this;return e.name?n=s.$el.find('input[name="'+e.name+'"]').filter(function(){var e=this;return!i&&c(e)&&(i=e),!e.disabled&&e.checked}).length:(i=e,n=i.checked),t?s.getRangeMsg(n,t):!!n||u(i,s,"")||s.messages.required}},length:function(e,t){var i=this.value,n=("true"===t[1]?i.replace(D,"xx"):i).length;return this.getRangeMsg(n,t,t[1]?"_2":"")},remote:function(t,i){if(i){var n,s=this,a=H.exec(i[0]),l=s._rules[s._i],r={},o="",u=a[3],d=a[2]||"POST",c=(a[1]||"").toLowerCase();return l.must=!0,r[t.name]=s.value,i[1]&&e.map(i.slice(1),function(e){var t,i;~e.indexOf("=")?o+="&"+e:(t=e.split(":"),e=U(t[0]),i=U(t[1])||e,r[e]=s.$el.find(m(i)).val())}),r=e.param(r)+o,!s.must&&l.data&&l.data===r?l.result:("cors"!==c&&/^https?:/.test(u)&&!~u.indexOf(location.host)&&(n="jsonp"),e.ajax({url:u,type:d,data:r,dataType:n}))}},filter:function(e,t){var i=this.value,n=i.replace(t?new RegExp("["+t[0]+"]","gm"):B,"");n!==i&&this.setValue(n)}}),i.config=function(t,i){function n(e,t){"rules"===e?new s(t):"messages"===e?new a(t):e in Y?Y[e]=t:K[e]=t}Q(t)?e.each(t,n):J(t)&&n(t,i)},i.setTheme=function(t,i){Q(t)?e.extend(!0,Z,t):J(t)&&Q(i)&&(Z[t]=e.extend(Z[t],i))},i.load=function(t){if(t){var n,s,a,l=document,r={},o=l.scripts[0];t.replace(/([^?=&]+)=([^&#]*)/g,function(e,t,i){r[t]=i}),n=r.dir||i.dir,i.css||""===r.css||(s=l.createElement("link"),s.rel="stylesheet",s.href=i.css=n+"jquery.validator.css",o.parentNode.insertBefore(s,o)),i.local||""===r.local||(i.local=(r.local||l.documentElement.lang||"en").replace("_","-"),i.loading=1,s=l.createElement("script"),s.src=n+"local/"+i.local+".js",a="onload"in s?"onload":"onreadystatechange",s[a]=function(){s.readyState&&!/loaded|complete/.test(s.readyState)||(e(window).trigger("validatorready"),s=s[a]=null,delete i.loading)},o.parentNode.insertBefore(s,o))}},function(){for(var e,t,n=document.scripts,s=n.length,a=/(.*validator(?:\.min)?.js)(\?.*(?:local|css|dir)(?:=[\w\-]*)?)?/;s--&&!t;)e=n[s],t=(e.hasAttribute?e.src:e.getAttribute("src",4)||"").match(a);t&&(i.dir=t[1].split("/").slice(0,-1).join("/")+"/",i.load(t[2]))}(),e[p]=i});